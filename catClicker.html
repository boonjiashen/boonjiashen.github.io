<!DOCTYPE html>
<html>
<head>
    <title>Cat clicker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>

<div class="list"></div>
<div class="displayArea"></div>

<script type="text/javascript">

    var listView = {
        init: function() {
            this.render();
        },
        render: function() {
            var cats = controller.getCats();
            var $list = $("<ul />");
            for (let cat of cats) {
                var $item = $("<li />")
                $item.append(this.createLink(cat));
                $list.append($item);
            }
            $(".list").html($list);
        },
        createLink: function(cat) {
            var $link = $("<a />", {
                href: "javascript:void(0)",
                text: cat.name,
            });
            $link.click(function() {
                controller.updateDetailPageWithCat(cat);
            });
            return $link;
        },
    };

    var detailView = {
        render: function() {
            var cat = controller.getCurrentCat();
            var $catDiv = this.createDetailDiv(cat);
            $(".displayArea").html($catDiv);
        },
        createDetailDiv: function(cat) {
            var $parentDiv = $("<div />");
            var $nameDiv = $("<div />", {
                text: cat.name,
            });
            var $imageDiv = $("<img />", {
                src: cat.imageFilename,
                height: '100px',
            });
            var $counterDiv = $("<div />", {
                text: cat.counter,
            });
            $imageDiv.click(function() {
                controller.incrementCounter();
            });
            $parentDiv.append($nameDiv).append($imageDiv).append($counterDiv);
            return $parentDiv;
        },
    };

    var controller = {
        getCats: function() {
            return model.getCats();
        },
        getCurrentCat: function() {
            return this.currentCat;
        },
        init: function() {
            this.currentCat = null;
            model.init();
            listView.init();
        },
        updateDetailPageWithCat: function(cat) {
            this.currentCat = cat;
            detailView.render();
        },
        incrementCounter: function() {
            this.currentCat.counter++;
            detailView.render();
        }
    };

    var model = {
        cats: [
        {
            name: "chicken",
            imageFilename: "assets/cat.jpg",
        },
        {
            name: "facial",
            imageFilename: "assets/cat2.jpg",
        },
        {
            name: "kentuck",
            imageFilename: "assets/cat3.jpg",
        },
        {
            name: "roast",
            imageFilename: "assets/cat4.jpg",
        },
        {
            name: "ballat",
            imageFilename: "assets/cat5.jpg",
        },
        ],
        getCats: function() {
            return this.cats;
        },
        init: function() {
            for (let cat of this.cats) {
                cat.counter = 0;
            }
        }
    };

    controller.init();
</script>
</body>
</html>