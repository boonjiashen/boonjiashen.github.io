---
layout: post
title: Build OpenCV 3 on Mac OS X with Python 3 and ffmpeg support
date: 2014-12-23 01:47:00.000000000 -08:00
type: post
published: true
status: publish
categories: []
tags: []
meta:
  _publicize_pending: '1'
  blogger_blog: blog.jiashen.me
  blogger_author: Jia Shen Boon
  blogger_406b70948e1d03d2554041dda5a8b48e_permalink: '4389063515094275109'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1464645583;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:28;}i:1;a:1:{s:2:"id";i:27;}i:2;a:1:{s:2:"id";i:12;}}}}
  original_post_id: '11'
  _wp_old_slug: '11'
author:
  login: boonjiashen
  email: jiashen@gmail.com
  display_name: jiashen
  first_name: ''
  last_name: ''
---
<p>Today I'll be talking about... exactly what the title suggests! I got an idea a couple of days back for a video processing project and I decided that I was going to use Python 3 and OpenCV 3, because I like shiny new things. I ran into a little bit of trouble getting ffmpeg support on OpenCV, and without it you can't grab frames from a video file. But with my Google-Fu and sheer genius I eventually pulled through.</p>
<h2>Instructions</h2>
<ol>
<li>
<div dir="ltr">Install ffmpeg using Homebrew (terminal command: brew install ffmpeg)</div>
</li>
<li>Follow instructions on <a href="http://luigolas.com/blog/2014/09/15/install-opencv3-with-python-3-mac-osx/">Luis González's blog post</a> EXCEPT when you're configuring the OpenCV build, also
<ul>
<li>Set FFMPEG_INCLUDE_DIR as /usr/local/Cellar/ffmpeg/2.4.2/include/</li>
<li>Set FFMPEG_LIB_DIR as /usr/local/Cellar/ffmpeg/2.4.2/lib/</li>
<li>(You can type ffmpeg in your terminal to find the exact paths for the two values above)</li>
<li>Tick the box of WITH_FFMPEG</li>
</ul>
</li>
<li>Continue with Luis González's instructions and you should be good!</li>
</ol>
<h2>Test</h2>
<div>To test whether the codec worked, you can try something like the following:</div>
<p>[code lang="python"]<br />
import cv2</p>
<p>cap = cv2.VideoCapture('my_video.mp4')<br />
frames = []<br />
while cap.isOpened():</p>
<p># Capture frame-by-frame<br />
read_success, frame = cap.read()</p>
<p>if not read_success: break</p>
<p>frames.append(frame)</p>
<p>print('Grabbed ', len(frames), ' frames')<br />
[/code]</p>
<p>Hope this was helpful!</p>
